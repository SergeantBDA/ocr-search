{% extends "_layout.html" %}
{% block content %}
<!-- full-width search & upload section -->
<div class="full-bleed">
  <div class="card">
    <h1>Извлечение текста (OCR) и поиск документов</h1>

    <form hx-get="{{ request.url_for('search') }}" hx-target="#results" hx-swap="innerHTML" hx-indicator="#spinner" class="field" style="margin-top:12px;">
      <div class="row">
        <input type="text" name="q" placeholder="Введите запрос..." required />
        <button class="btn" type="submit">Поиск</button>
      </div>
    </form>

    <hr />

    <form id="uploadForm"
          hx-post="{{ request.url_for('upload') }}"
          hx-target="#results"
          hx-swap="afterbegin"
          hx-encoding="multipart/form-data"
          hx-indicator="#spinner"
          method="post"
          enctype="multipart/form-data" class="field">
      <div class="row">
        <input type="file" name="files" multiple accept="image/*,application/pdf" />
        <button class="btn" type="submit">Загрузить</button>
      </div>
      <a href="#" onclick="doLogout(); return false;" class="logout-link">Выйти</a>
    </form>
  </div>
</div>

<!-- results area stays in centered container -->
<div class="container" style="margin-top:18px;">
  <div id="results">
    {% include "_results.html" %}
  </div>
</div>
{% endblock %}